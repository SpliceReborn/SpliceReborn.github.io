(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{565:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var i=a(5155),s=a(2115),r=a(5028),l=a(3363),o=a.n(l);let n=(0,r.default)(()=>a.e(343).then(a.bind(a,4343)),{loadableGenerated:{webpack:()=>[4343]},ssr:!1}),h=(0,r.default)(()=>a.e(619).then(a.bind(a,2619)),{loadableGenerated:{webpack:()=>[2619]},ssr:!1}),p=[{name:"destroyer",length:2,positions:[],isPlaced:!1,isSunk:!1},{name:"submarine",length:3,positions:[],isPlaced:!1,isSunk:!1},{name:"cruiser",length:3,positions:[],isPlaced:!1,isSunk:!1},{name:"battleship",length:4,positions:[],isPlaced:!1,isSunk:!1},{name:"carrier",length:5,positions:[],isPlaced:!1,isSunk:!1}];function u(){let[e,t]=(0,s.useState)("setup"),[a,r]=(0,s.useState)(JSON.parse(JSON.stringify(p))),[l,u]=(0,s.useState)(JSON.parse(JSON.stringify(p))),[_,d]=(0,s.useState)(Array(100).fill(null)),[c,m]=(0,s.useState)(Array(100).fill(null)),[f,S]=(0,s.useState)([]),[B,g]=(0,s.useState)([]),[y,b]=(0,s.useState)([]),[v,C]=(0,s.useState)([]),[M,N]=(0,s.useState)(null),[k,J]=(0,s.useState)("horizontal"),[O,P]=(0,s.useState)("player"),[w,x]=(0,s.useState)("Place your ships on the board");(0,s.useEffect)(()=>{if("setup"===e){let e=JSON.parse(JSON.stringify(p)),t=[...c];e.forEach(e=>{z(e,t)}),u(e),m(t)}},[]),(0,s.useEffect)(()=>{if("playing"===e&&"computer"===O){let e=setTimeout(()=>{j()},1e3);return()=>clearTimeout(e)}},[O,e]),(0,s.useEffect)(()=>{"playing"===e&&(l.every(e=>e.isSunk)&&(t("over"),x("Congratulations! You won!")),a.every(e=>e.isSunk)&&(t("over"),x("Game over! The computer won.")))},[a,l,e]);let z=(e,t)=>{let a=!1;for(;!a;){let i,s=.5>Math.random()?"horizontal":"vertical",r=[];i="horizontal"===s?10*Math.floor(10*Math.random())+Math.floor(Math.random()*(10-e.length+1)):10*Math.floor(Math.random()*(10-e.length+1))+Math.floor(10*Math.random());for(let t=0;t<e.length;t++)"horizontal"===s?r.push(i+t):r.push(i+10*t);r.every(e=>!(e<0)&&!(e>=100)&&null===t[e]&&!T(e,t))&&(r.forEach(a=>{t[a]=e.name}),e.positions=r,e.isPlaced=!0,a=!0)}},T=(e,t)=>{let a=Math.floor(e/10),i=e%10;for(let s=Math.max(0,a-1);s<=Math.min(9,a+1);s++)for(let a=Math.max(0,i-1);a<=Math.min(9,i+1);a++){let i=10*s+a;if(i!==e&&null!==t[i])return!0}return!1},j=()=>{let t;if("playing"!==e||"computer"!==O)return;let i=0,s=(()=>{for(let e of[...y]){let t=Math.floor(e/10),a=e%10,i=[];t>0&&i.push(e-10),a<9&&i.push(e+1),t<9&&i.push(e+10),a>0&&i.push(e-1);let s=i.filter(e=>!y.includes(e)&&!v.includes(e));if(s.length>0)return s[Math.floor(Math.random()*s.length)]}return null})();if(null!==s)t=s;else do if(t=Math.floor(100*Math.random()),++i>100){x("Computer couldn't find a valid move!"),P("player");return}while(y.includes(t)||v.includes(t));let l=_[t];l?(b(e=>[...e,t]),r(a.map(e=>{if(e.name===l){let a=e.positions.filter(e=>e!==t),i=0===a.length;return i?x("Computer sunk your ".concat(e.name,"!")):x("Computer hit your ship!"),{...e,positions:a,isSunk:i}}return e}))):(C(e=>[...e,t]),x("Computer missed!")),P("player")};return(0,i.jsxs)("div",{className:o().gameContainer,children:[(0,i.jsx)("div",{className:o().gameMessage,children:w}),(0,i.jsxs)("div",{className:o().gameBoards,children:[(0,i.jsxs)("div",{className:o().boardContainer,children:[(0,i.jsx)("h2",{className:o().boardTitle,children:"Your Board"}),(0,i.jsx)(n,{board:_,hits:y,misses:v,isPlayerBoard:!0,onClick:t=>{if("setup"!==e||!M)return;let i=[],s=Math.floor(t/10),l=t%10;for(let e=0;e<M.length;e++)if("horizontal"===k){if(l+e>=10)return void x("Ship can't be placed outside the board!");i.push(10*s+(l+e))}else{if(s+e>=10)return void x("Ship can't be placed outside the board!");i.push((s+e)*10+l)}if(i.some(e=>null!==_[e]))return void x("Ships can't overlap!");if(i.some(e=>T(e,_)))return void x("Ships can't be adjacent to each other!");let o=[..._];i.forEach(e=>{o[e]=M.name}),d(o),r(a.map(e=>e.name===M.name?{...e,isPlaced:!0,positions:i}:e)),N(null),x("Place your ships on the board")},selectedShip:M,orientation:k,gameState:e})]}),("playing"===e||"over"===e)&&(0,i.jsxs)("div",{className:o().boardContainer,children:[(0,i.jsx)("h2",{className:o().boardTitle,children:"Computer's Board"}),(0,i.jsx)(n,{board:c,hits:f,misses:B,isPlayerBoard:!1,onClick:t=>{if("playing"!==e||"player"!==O)return;if(f.includes(t)||B.includes(t))return void x("You've already fired at this position!");let a=c[t];a?(S(e=>[...e,t]),u(l.map(e=>{if(e.name===a){let a=e.positions.filter(e=>e!==t),i=0===a.length;return i?x("You sunk their ".concat(e.name,"!")):x("Hit!"),{...e,positions:a,isSunk:i}}return e}))):(g(e=>[...e,t]),x("Miss!")),P("computer")},selectedShip:null,orientation:"horizontal",gameState:e,hideShips:!0})]})]}),(0,i.jsx)(h,{gameState:e,ships:a,selectedShip:M,orientation:k,onSelectShip:t=>{if("setup"===e){if(t.isPlaced){let e=[..._];t.positions.forEach(t=>{e[t]=null}),d(e),r(a.map(e=>e.name===t.name?{...e,isPlaced:!1,positions:[]}:e))}N(t)}},onToggleOrientation:()=>{J(e=>"horizontal"===e?"vertical":"horizontal")},onStartGame:()=>{a.every(e=>e.isPlaced)?(t("playing"),P("player"),x("Your turn - Click on the computer's board to fire!")):x("Place all your ships before starting!")},onResetGame:()=>{t("setup"),r(JSON.parse(JSON.stringify(p))),u(JSON.parse(JSON.stringify(p))),d(Array(100).fill(null)),m(Array(100).fill(null)),S([]),g([]),b([]),C([]),N(null),J("horizontal"),P("player"),x("Place your ships on the board");let e=JSON.parse(JSON.stringify(p)),a=Array(100).fill(null);e.forEach(e=>{z(e,a)}),u(e),m(a)}})]})}},3363:e=>{e.exports={gameContainer:"Battleship_gameContainer__y_Fkd",gameMessage:"Battleship_gameMessage__JxS1C",gameBoards:"Battleship_gameBoards__zRkSd",boardContainer:"Battleship_boardContainer__sAss5",boardTitle:"Battleship_boardTitle___aMiT",board:"Battleship_board__JeRm2",boardGrid:"Battleship_boardGrid__XxoDf",cell:"Battleship_cell___n6pD",ship:"Battleship_ship__z7Af9",hit:"Battleship_hit__oC_OQ",miss:"Battleship_miss__Hip5J",preview:"Battleship_preview__FZd4f",invalid:"Battleship_invalid__CKgJN",destroyer:"Battleship_destroyer__uO0j8",submarine:"Battleship_submarine__TMmsw",cruiser:"Battleship_cruiser__1TVz6",battleship:"Battleship_battleship__yoxOg",carrier:"Battleship_carrier___RTwZ",controls:"Battleship_controls__RLqaa",controlTitle:"Battleship_controlTitle__IWLWS",controlDescription:"Battleship_controlDescription__csw2O",shipsContainer:"Battleship_shipsContainer__DhIB8",shipsList:"Battleship_shipsList__jAa27",shipButton:"Battleship_shipButton__O5GR7",selected:"Battleship_selected__418sW",placed:"Battleship_placed__ha4LT",shipPreview:"Battleship_shipPreview__c2JAG",shipCell:"Battleship_shipCell__z__SR",shipName:"Battleship_shipName__8LrEU",orientationControl:"Battleship_orientationControl__c0cED",orientationButton:"Battleship_orientationButton__RZqH_",startButton:"Battleship_startButton__on5rz",resetButton:"Battleship_resetButton__GrtiJ",gameInfo:"Battleship_gameInfo__woAxp",shipStatus:"Battleship_shipStatus__caull",playerShips:"Battleship_playerShips__whIz7",sunk:"Battleship_sunk__Ew1mp"}}}]);