(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{565:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var i=a(5155),s=a(2115),l=a(5028),r=a(3363),n=a.n(r);let o=(0,l.default)(()=>a.e(343).then(a.bind(a,4343)),{loadableGenerated:{webpack:()=>[4343]},ssr:!1}),h=(0,l.default)(()=>a.e(619).then(a.bind(a,2619)),{loadableGenerated:{webpack:()=>[2619]},ssr:!1}),p=[{name:"destroyer",length:2,positions:[],isPlaced:!1,isSunk:!1},{name:"submarine",length:3,positions:[],isPlaced:!1,isSunk:!1},{name:"cruiser",length:3,positions:[],isPlaced:!1,isSunk:!1},{name:"battleship",length:4,positions:[],isPlaced:!1,isSunk:!1},{name:"carrier",length:5,positions:[],isPlaced:!1,isSunk:!1}];function u(){let[e,t]=(0,s.useState)("setup"),[a,l]=(0,s.useState)(JSON.parse(JSON.stringify(p))),[r,u]=(0,s.useState)(JSON.parse(JSON.stringify(p))),[_,d]=(0,s.useState)(Array(100).fill(null)),[c,f]=(0,s.useState)(Array(100).fill(null)),[m,S]=(0,s.useState)([]),[B,g]=(0,s.useState)([]),[y,b]=(0,s.useState)([]),[M,v]=(0,s.useState)([]),[C,N]=(0,s.useState)(null),[k,x]=(0,s.useState)("horizontal"),[J,O]=(0,s.useState)("player"),[P,w]=(0,s.useState)("Place your ships on the board");(0,s.useEffect)(()=>{if("setup"===e){let e=JSON.parse(JSON.stringify(p)),t=[...c];e.forEach(e=>{z(e,t)}),u(e),f(t)}},[]),(0,s.useEffect)(()=>{if("playing"===e&&"computer"===J){let e=setTimeout(()=>{j()},1e3);return()=>clearTimeout(e)}},[J,e]),(0,s.useEffect)(()=>{"playing"===e&&(r.every(e=>e.isSunk)&&(t("over"),w("Congratulations! You won!")),a.every(e=>e.isSunk)&&(t("over"),w("Game over! The computer won.")))},[a,r,e]);let z=(e,t)=>{let a=!1;for(;!a;){let i,s=.5>Math.random()?"horizontal":"vertical",l=[];i="horizontal"===s?10*Math.floor(10*Math.random())+Math.floor(Math.random()*(10-e.length+1)):10*Math.floor(Math.random()*(10-e.length+1))+Math.floor(10*Math.random());for(let t=0;t<e.length;t++)"horizontal"===s?l.push(i+t):l.push(i+10*t);l.every(e=>!(e<0)&&!(e>=100)&&null===t[e]&&!T(e,t))&&(l.forEach(a=>{t[a]=e.name}),e.positions=l,e.isPlaced=!0,a=!0)}},T=(e,t)=>{let a=Math.floor(e/10),i=e%10;for(let s=Math.max(0,a-1);s<=Math.min(9,a+1);s++)for(let a=Math.max(0,i-1);a<=Math.min(9,i+1);a++){let i=10*s+a;if(i!==e&&null!==t[i])return!0}return!1},j=()=>{let t;if("playing"!==e||"computer"!==J)return;let i=0,s=(()=>{let e=[...y];for(let t of e){let a=Math.floor(t/10),i=t%10;for(let s of e){if(t===s)continue;let e=Math.floor(s/10),l=s%10;if(a===e&&1===Math.abs(i-l)||i===l&&1===Math.abs(a-e)){let t=[];if(a===e){let e=Math.min(i,l),s=Math.max(i,l);if(e>0){let i=10*a+(e-1);y.includes(i)||M.includes(i)||t.push(i)}if(s<9){let e=10*a+(s+1);y.includes(e)||M.includes(e)||t.push(e)}}else{let s=Math.min(a,e),l=Math.max(a,e);if(s>0){let e=(s-1)*10+i;y.includes(e)||M.includes(e)||t.push(e)}if(l<9){let e=(l+1)*10+i;y.includes(e)||M.includes(e)||t.push(e)}}if(t.length>0)return t[Math.floor(Math.random()*t.length)]}}}return null})();if(null!==s)t=s;else{let e=(()=>{for(let e of[...y]){let t=Math.floor(e/10),a=e%10,i=[];t>0&&i.push(e-10),a<9&&i.push(e+1),t<9&&i.push(e+10),a>0&&i.push(e-1);let s=i.filter(e=>!y.includes(e)&&!M.includes(e));if(s.length>0)return s[Math.floor(Math.random()*s.length)]}return null})();if(null!==e)t=e;else do if(t=Math.floor(100*Math.random()),++i>100){w("Computer couldn't find a valid move!"),O("player");return}while(y.includes(t)||M.includes(t))}let r=_[t];r?(b(e=>[...e,t]),l(a.map(e=>{if(e.name===r){let a=e.positions.filter(e=>e!==t),i=0===a.length;return i?w("Computer sunk your ".concat(e.name,"!")):w("Computer hit your ship!"),{...e,positions:a,isSunk:i}}return e}))):(v(e=>[...e,t]),w("Computer missed!")),O("player")};return(0,i.jsxs)("div",{className:n().gameContainer,children:[(0,i.jsx)("div",{className:n().gameMessage,children:P}),(0,i.jsxs)("div",{className:n().gameBoards,children:[(0,i.jsxs)("div",{className:n().boardContainer,children:[(0,i.jsx)("h2",{className:n().boardTitle,children:"Your Board"}),(0,i.jsx)(o,{board:_,hits:y,misses:M,isPlayerBoard:!0,onClick:t=>{if("setup"!==e||!C)return;let i=[],s=Math.floor(t/10),r=t%10;for(let e=0;e<C.length;e++)if("horizontal"===k){if(r+e>=10)return void w("Ship can't be placed outside the board!");i.push(10*s+(r+e))}else{if(s+e>=10)return void w("Ship can't be placed outside the board!");i.push((s+e)*10+r)}if(i.some(e=>null!==_[e]))return void w("Ships can't overlap!");if(i.some(e=>T(e,_)))return void w("Ships can't be adjacent to each other!");let n=[..._];i.forEach(e=>{n[e]=C.name}),d(n),l(a.map(e=>e.name===C.name?{...e,isPlaced:!0,positions:i}:e)),N(null),w("Place your ships on the board")},selectedShip:C,orientation:k,gameState:e})]}),("playing"===e||"over"===e)&&(0,i.jsxs)("div",{className:n().boardContainer,children:[(0,i.jsx)("h2",{className:n().boardTitle,children:"Computer's Board"}),(0,i.jsx)(o,{board:c,hits:m,misses:B,isPlayerBoard:!1,onClick:t=>{if("playing"!==e||"player"!==J)return;if(m.includes(t)||B.includes(t))return void w("You've already fired at this position!");let a=c[t];a?(S(e=>[...e,t]),u(r.map(e=>{if(e.name===a){let a=e.positions.filter(e=>e!==t),i=0===a.length;return i?w("You sunk their ".concat(e.name,"!")):w("Hit!"),{...e,positions:a,isSunk:i}}return e}))):(g(e=>[...e,t]),w("Miss!")),O("computer")},selectedShip:null,orientation:"horizontal",gameState:e,hideShips:!0})]})]}),(0,i.jsx)(h,{gameState:e,ships:a,selectedShip:C,orientation:k,onSelectShip:t=>{if("setup"===e){if(t.isPlaced){let e=[..._];t.positions.forEach(t=>{e[t]=null}),d(e),l(a.map(e=>e.name===t.name?{...e,isPlaced:!1,positions:[]}:e))}N(t)}},onToggleOrientation:()=>{x(e=>"horizontal"===e?"vertical":"horizontal")},onStartGame:()=>{a.every(e=>e.isPlaced)?(t("playing"),O("player"),w("Your turn - Click on the computer's board to fire!")):w("Place all your ships before starting!")},onResetGame:()=>{t("setup"),l(JSON.parse(JSON.stringify(p))),u(JSON.parse(JSON.stringify(p))),d(Array(100).fill(null)),f(Array(100).fill(null)),S([]),g([]),b([]),v([]),N(null),x("horizontal"),O("player"),w("Place your ships on the board");let e=JSON.parse(JSON.stringify(p)),a=Array(100).fill(null);e.forEach(e=>{z(e,a)}),u(e),f(a)}})]})}},3363:e=>{e.exports={gameContainer:"Battleship_gameContainer__y_Fkd",gameMessage:"Battleship_gameMessage__JxS1C",gameBoards:"Battleship_gameBoards__zRkSd",boardContainer:"Battleship_boardContainer__sAss5",boardTitle:"Battleship_boardTitle___aMiT",board:"Battleship_board__JeRm2",boardGrid:"Battleship_boardGrid__XxoDf",cell:"Battleship_cell___n6pD",ship:"Battleship_ship__z7Af9",hit:"Battleship_hit__oC_OQ",miss:"Battleship_miss__Hip5J",preview:"Battleship_preview__FZd4f",invalid:"Battleship_invalid__CKgJN",destroyer:"Battleship_destroyer__uO0j8",submarine:"Battleship_submarine__TMmsw",cruiser:"Battleship_cruiser__1TVz6",battleship:"Battleship_battleship__yoxOg",carrier:"Battleship_carrier___RTwZ",controls:"Battleship_controls__RLqaa",controlTitle:"Battleship_controlTitle__IWLWS",controlDescription:"Battleship_controlDescription__csw2O",shipsContainer:"Battleship_shipsContainer__DhIB8",shipsList:"Battleship_shipsList__jAa27",shipButton:"Battleship_shipButton__O5GR7",selected:"Battleship_selected__418sW",placed:"Battleship_placed__ha4LT",shipPreview:"Battleship_shipPreview__c2JAG",shipCell:"Battleship_shipCell__z__SR",shipName:"Battleship_shipName__8LrEU",orientationControl:"Battleship_orientationControl__c0cED",orientationButton:"Battleship_orientationButton__RZqH_",startButton:"Battleship_startButton__on5rz",resetButton:"Battleship_resetButton__GrtiJ",gameInfo:"Battleship_gameInfo__woAxp",shipStatus:"Battleship_shipStatus__caull",playerShips:"Battleship_playerShips__whIz7",sunk:"Battleship_sunk__Ew1mp"}}}]);